El viernes hicimos los ejercicios 1 y 2.

Ejercicio 1:

Apartado 1:

```bash
cesar@crb-server:~$ mkdir pr0201
cesar@crb-server:~$ cd pr0201
cesar@crb-server:~/pr0201$ mkdir dir1
cesar@crb-server:~/pr0201$ mkdir dir2
```

Dir1 tiene todos los permisos concedidos excepto la modificación (w) para others.
Por tanto el creador de dir1 puede leerlo, modificarlo y acceder, el grupo del propietario de dir1 puede leerlo, modificarlo y acceder y others pueden leerlo y acceder.

Apartado 2:

```bash
cesar@crb-server:~/pr0201$ chmod u-w,g-w,o-w dir2
```

Apartado 3:

```bash
cesar@crb-server:~/pr0201$ chmod 551 dir2
```

Apartado 4:

```bash
dr-xr-x--x 2 cesar cesar 4096 sep 26 07:58 dir2
```

Apartado 5:

```bash
cesar@crb-server:~/pr0201/dir2$ mkdir dir21
mkdir: cannot create directory ‘dir21’: Permission denied
```

Apartado 6:

```bash
cesar@crb-server:~/pr0201$ chmod u+w dir2
cesar@crb-server:~/pr0201$ cd dir2
cesar@crb-server:~/pr0201/dir2$ mkdir dir21
```

Ejercicio 2:

Apartado 1:

(Por defecto file tiene rw-r--r--)

```bash
rwxrwxr-x : chmod u+x,g+wx,o+x file
rwxr--r-- : chmod u+x file
r--r----- : chmod u-w,o-r file
rwxr-xr-x : chmod u+x,g+x,o+x file
rwxr-xr-x : chmod u+x,g+x,o+x file
r-x--x--x : chmod u+x,u-w,g+x,g-r,o+x,o-r file
-w-r----x : chmod u-r,o+x,o-r file
-----xrwx : chmod u-rw,g+x,g-r,o+wx file
r---w---x : chmod u-w,g+w,g-r,o+x,o-r file
-w------- : chmod u-r,g-r,o-r file
rw-r----- : chmod o-r file
rwx--x--x : chmod u+x,g+x,g-r,o+x,o-r file
```

Apartado 2:

(Por defecto file tiene rw-r--r--)

```bash
rwx rwx rwx : chmod 777 file
--x --x --x : chmod 111 file
r-- -w- --x : chmod 421 file
-w- --- --- : chmod 200 file
rw- r-- --- : chmod 640 file
rwx --x --x : chmod 711 file
rwx r-x r-x : chmod 755 file
r-x --x --x : chmod 511 file
-w- r-- --x : chmod 241 file
--- --x rwx : chmod 017 file
```

Ejercicio 3:

Apartado 1:

```bash
sudo addgroup asir
sudo adduser crb1
sudo adduser crb2
sudo adduser crb1 asir
sudo adduser crb2 asir
```

El grupo asir quedó así:

```bash
asir:x:1001:crb1,crb2
```

Apartado 2:

```bash
mkdir /compartido
sudo chown root:asir /compartido
```

El directorio 'compartido' quedó así:

```bash
drwxrwxr-x 2 root  asir  4096 oct  3 07:23 compartido
```

 Apartado 3:

```bash
sudo chmod 770 /compartido
```

Los permisos quedaron así:

```bash
drwxrwx--- 2 root  asir  4096 oct  3 07:23 compartido
```

Apartado 4:

```bash
sudo chmod g+s /compartido
```

Vemos si el bit SGID está activado:

```bash
drwxrws--- 2 root  asir  4096 oct  3 07:23 compartido
```
Apartado 5:

```bash
su - crb1
cd /compartido
touch fichero1
```

Añado contenido al fichero (lo hice con cat porque no tenía instalado gedit)

```bash
crb1@crb-server:/compartido$ cat >> fichero1
blablabla
crb1@crb-server:/compartido$
```

Comprobamos los permisos del fichero:

```bash
-rw-rw-r-- 1 crb1 asir 10 oct  3 07:45 fichero1
```

Apartado 6:

```bash
su - crb2
cd /compartido
cat >> fichero1
```

Añadí con éxito lo siguiente al fichero:

```bash
crb2@crb-server:/compartido$ cat >> fichero1
asdfasdf
```

Comprobamos el contenido del fichero:

```bash
crb2@crb-server:/compartido$ cat fichero1
blablabla
asdfasdfc
```

Entonces, crb2 pudo modificar el fichero1.

Apartado 7:

Los usuarios crb1 y crb2 pudieron modificar fichero1 gracias a que el fichero pertenece al directorio compartido, el cual tiene el bit SGID activado, lo que significa que fichero1 pertenece al grupo del directorio: asir. 

Como crb1 y crb2 pertenecen al grupo asir, y el fichero tiene permisos de modificación para el grupo propietario (asir), pudieron modificarlo. 

Otro usuario fuera del grupo asir no habría podido modificarlo.

Dado todo lo anterior, la ventaja de usar el bit SGID en entornos colaborativos es que todo aquel incluido en el entorno (grupo propietario) puede modificar y colaborar en el desarrollo del contenido del directorio.

Si no se aplica el bit SGID en un entorno colaborativo, nos exponemos a que algunos colaboradores no puedan acceder al contenido ni modificarlo; o dependiendo de la configuración de permisos y propiedad, otro usuario ajeno podría modificar el contenido.

Apartado 8:

Usando rm, rmdir y userdel, todo lo referido a este ejercicio ha sido borrado.

Ejercicio 4:

Apartado 1:

```bash
cesar@crb-server:~$ sudo mkdir /compartido
cesar@crb-server:~$ sudo chmod 777 /compartido
```

Comprobación de permisos:

```bash
drwxrwxrwx   2 root root       4096 oct  3 08:17 compartido
```

Apartado 2:

```bash
cesar@crb-server:~$ sudo adduser crb1
cesar@crb-server:~$ sudo adduser crb2
```

Apartado 3:

```bash
cesar@crb-server:~$ su - crb1
crb1@crb-server:~$ cd /compartido
crb1@crb-server:/compartido$ touch fichero1
crb1@crb-server:/compartido$ cd ..
crb1@crb-server:~$ su - crb2
crb2@crb-server:~$ cd /compartido
crb2@crb-server:/compartido$ rm fichero1
rm: remove write-protected regular empty file 'fichero1'? y
crb2@crb-server:/compartido$ ls
crb2@crb-server:/compartido$
```

Apartado 4:



[Volver al nivel superior](..)